---
title: L09-实现自定义菜单
date: 2021-09-16 16:03:46
tags: 微信公众号、前端
categories: 
- 前端
- 微信公众号开发
cover: https://tva1.sinaimg.cn/large/008i3skNly1guij0nt5ocj60ea0fy74k02.jpg
---

# **L09-实现自定义菜单**

- 自定义菜单最多包括3个一级菜单，每个一级菜单最多包含5个二级菜单

- 一级菜单最多4个汉字，二级菜单最多8个汉字，多出来的部分将会以“...”代替

- 创建自定义菜单后，菜单的刷新策略是，在用户进入公众号会话页或公众号profile页时，如果发现上一次拉取菜单的请求在5分钟以前，就会拉取一下菜单，如果菜单有更新，就会刷新客户端的菜单。测试时可以尝试取消关注公众账号后再次关注，则可以看到创建后的效果

- 自定义菜单接口可实现多种类型按钮，如下：  

![](https://tva1.sinaimg.cn/large/008i3skNly1guij681pgdj613w0sgako02.jpg)  

- 接口调用请求说明：http请求方式：POST（请使用https协议）`https://api.weixin.qq.com/cgi-bin/menu/create?access_token=ACCESS_TOKEN`

- click和view的请求示例：

![](https://tva1.sinaimg.cn/large/008i3skNly1guij61bggwj60w40u0wgk02.jpg)

- 返回结果  

![](https://tva1.sinaimg.cn/large/008i3skNly1guij7x2mqtj616a0emab302.jpg)


- 删除接口

- 使用接口创建自定义菜单后，开发者还可使用接口删除当前使用的自定义菜单。另请注意，在个性化菜单时，调用此接口会删除默认菜单及全部个性化菜单。

- 请求说明：http请求方式：GET `https://api.weixin.qq.com/cgi-bin/menu/delete?access_token=ACCESS_TOKEN`

- 返回说明：  

![](https://tva1.sinaimg.cn/large/008i3skNly1guij98afrfj615407ewes02.jpg)

1、menu.js

- 用来自定义菜单

- 更多的定义见微信官方开发文档  

![](https://tva1.sinaimg.cn/large/008i3skNly1guijaau5k2j610y0u0q4f02.jpg)


2、createMenu(menu)方法  

![](https://tva1.sinaimg.cn/large/008i3skNly1guijb176sjj61fk0ngtbk02.jpg)



3、deleteMenu()方法  

![](https://tva1.sinaimg.cn/large/008i3skNly1guijbvtx52j61ew0mw41402.jpg)  

4、测试

- 首先先删除之前定义的菜单

- 创建菜单和删除菜单都可以打印看一下控制台的输出的结果

- 运行成功后，需要将测试号取消关注后再重新关注即可显示新创建的菜单  

![](https://tva1.sinaimg.cn/large/008i3skNly1guijcfmhicj612g08ojs602.jpg)  

![](https://tva1.sinaimg.cn/large/008i3skNly1guijci0zuoj60yi0gfaal02.jpg)